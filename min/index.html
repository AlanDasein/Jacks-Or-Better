<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
   <title>Jacks or Better</title>
	<link href='http://fonts.googleapis.com/css?family=Poiret+One' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Audiowide' rel='stylesheet' type='text/css'>
	<style type="text/css">
		body{margin:25px;background:#fff;cursor:default;-webkit-user-select:none;-moz-user-select:-moz-none;-ms-user-select:none;user-select:none}header{padding:20px;background:#000;font:bold 25px Arial;color:#fff}article{height:480px;border:1px solid #333;overflow:hidden}footer{padding:20px;height:18px;background:#000;font:bold 13px Tahoma;color:#fff}input{width:50px;margin:-1px 0;padding:3px 0;border:1px solid #333;font:12px Arial;text-align:center}button{padding:5px 25px;font:bold 14px Tahoma}table{margin:0;padding:0;border-spacing:0;background:#000064;border:2px solid #ff0;border-right:none}td{padding:0 2px;border-right:2px solid #ff0;font:bold 19px Arial;color:#ff0;line-height:21px;letter-spacing:.7px}a{text-decoration:underline;font:13px Verdana;color:#ff0}a:hover{color:#0406FF}.page{margin:auto;width:680px}.form{padding:20px;font:14px Arial}.form .box{padding:20px;border:1px solid #333}.screen{padding:2px;min-height:478px;background:#00019f}.screen .labels{width:218px}.screen .bets{width:76px;text-align:right}.screen .max{width:116px}.screen .selected{background:#b00000}.screen .panel{margin:3px 5px 0;width:125px}.screen .led{margin:auto;width:42px;background:#fce200;border:2px solid red;border-radius:4px;font:bold 14px Arial;text-align:center}.screen .card{margin-top:3px;height:170px;border:5px solid #fff;border-radius:8px}.screen .back{background:#fff url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAhElEQVQYV2P8lZj4n23+fEYGIPjl6Pif1dubgbGkBMx/ISDwHyIBVMTw4AED2/79YP7/np7/L1taGCQ+fGCE62RQUGCAmQTSKV5TAzaJEWQsTCfIpHfr14N1wkxiBBmHbKdQYCDcJJBmDDvR3QR3LcxOmG9gbmIEOQjZzt9bt8J9A3ITAMY7Wlye91LxAAAAAElFTkSuQmCC) repeat}.screen .front{background:#fff}.screen .sign{margin-left:10px;height:40px;font:bold 40px "Poiret One"}.screen .suite{margin-top:-10px;font:100px "Century Gothic";text-align:center}.screen .report{margin:0 6px 0 16px;font:25px Audiowide;color:#a00;text-shadow:-1px -1px 0 #ffe500,1px -1px 0 #ffe500,-1px 1px 0 #ffe500,1px 1px 0 #ffe500}.screen .info{margin:13px 0 0 27px;font:bold 18px Arial;color:#fff;letter-spacing:.5px}.screen .buttonbig{margin:4px 10px 0;padding:2px;width:90px;background:#e0c820;border:1px solid #000;border-radius:4px;outline:0}.screen .buttonsmall{margin-right:20px;padding:2px;width:50px;background:-webkit-linear-gradient(#000,#444);background:linear-gradient(#000,#444);border:1px solid #000;border-radius:3px;outline:0}.screen .buttonbig > div{padding:3px;border:2px outset #eee182;font:bold 15px Arial;text-align:center}.screen .surface{padding:3px 0;border-radius:3px;font:bold 14px Arial;text-align:center;line-height:15px}.screen .active{background:-webkit-linear-gradient(#eee,#ccc);background:linear-gradient(#eee,#ccc);text-shadow:1px 2px 1px #aaa}.screen .disable{background:#666;cursor:default}.screen .disable > div{border-color:#666;color:#666}.screen .inactive{background:-webkit-linear-gradient(#f6f6fa,#535454);background:linear-gradient(#f6f6fa,#535454);text-shadow:1px 2px 1px #fff;cursor:default}.columnleft{float:left}.columnright{float:right}.columnclear{clear:both}.link{cursor:pointer}.hide{display:none}.invisible{visibility:hidden}.black{color:#000}.white{color:#fff}.red{color:#F20000}.green{color:green}.jump{height:3px}
	</style>
	<script src="http://code.jquery.com/jquery-1.9.1.js" type="text/javascript"></script>
	<script type="text/javascript">
		$(document).ready(function(){var dom=new function(){this.form=$("section.form"),this.screen=$("section.screen"),this.amount=$("#amount"),this.credits=$("#credits"),this.start=$("#start")};var cons=new function(){this.LABELS=["ROYAL FLUSH","STRAIGHT FLUSH","4 OF A KIND","FULL HOUSE","FLUSH","STRAIGHT","3 OF A KIND","TWO PAIR","JACKS OR BETTER"],this.VALUES=[250,50,25,9,6,4,3,2,1],this.SUITES=[24,27,29,30],this.COLORS=["black","black","red","red"],this.BETS=5,this.CARDS=5};var vars=new function(){this.amount=100,this.credits=100,this.bet=1,this.hand=0,this.blinking=0,this.addition=0,this.serie=""};var tools=new function(){this.numeric=function(e,t){var n=t?e==110||e==190:e==13;return n||e==8||e==9||e==46||e>=35&&e<=40||e>=48&&e<=57||e>=96&&e<=105}};var app=new function(){this.init=function(){var e,t;var n=$("<table/>");if(dom.amount.val()>0&&dom.credits.val()>0){vars.amount=dom.amount.val();vars.credits=dom.credits.val()}vars.amount/=vars.credits;n.appendTo(dom.screen);for(var r=0,i=cons.LABELS.length;r<i;r++){e=$("<tr/>");e.appendTo(n);$("<td/>",{"class":"labels",html:cons.LABELS[r]}).appendTo(e);for(var s=0;s<cons.BETS;s++){t=s==0?"bets selected":s==cons.BETS-1?"bets max":"bets";$("<td/>",{"class":t,html:r==0&&s==cons.BETS-1?"4000":cons.VALUES[r]*(s+1)}).appendTo(e)}}for(var r=0;r<cons.CARDS;r++){e=$("<div/>",{"class":"columnleft panel"});e.appendTo(dom.screen);$("<div/>",{"class":"led invisible",html:"HOLD"}).appendTo(e);$("<div/>",{"class":"card back"}).appendTo(e)}$("<div/>",{"class":"columnclear"}).appendTo(dom.screen);$("<div/>",{"class":"columnleft report hide",id:"pay"}).appendTo(dom.screen);$("<div/>",{"class":"columnright report",id:"assets",html:vars.credits+" CREDITS"}).appendTo(dom.screen);$("<div/>",{"class":"columnclear"}).appendTo(dom.screen);$("<div/>",{"class":"columnleft info",html:"BET 1"}).appendTo(dom.screen);e=$("<div/>",{"class":"columnright buttonbig link"}).appendTo(dom.screen);$("<div/>",{"class":"frame",html:"DEAL"}).appendTo(e);e=$("<div/>",{"class":"columnright buttonsmall"}).appendTo(dom.screen);$("<div/>",{"class":"active link surface link",html:"BET MAX"}).appendTo(e);e=$("<div/>",{"class":"columnright buttonsmall"}).appendTo(dom.screen);$("<div/>",{"class":"active link surface link",html:"BET ONE"}).appendTo(e);$("<div/>",{"class":"columnclear jump"}).appendTo(dom.screen);e=$("footer");$("<b>Your Progress: <span class='flag red'>0</span> BTC</b>").appendTo(e);$("<a href='index.html' class='columnright'>restart the game</a>").appendTo(e);dom.rows=$("tr");dom.leds=$("div.led");dom.cards=$("div.card");dom.pay=$("#pay");dom.assets=$("#assets");dom.info=$("div.info");dom.play=$("div.frame");dom.bets=$("div.surface");dom.earnings=$("span.flag");dom.form.addClass("hide");dom.screen.removeClass("hide");assign.add()},this.reset=function(e,t){for(var n=0,r=e.length;n<r;n++){if(e[n]=="BET"){dom.bets.each(function(){$(this).removeClass(t[n]=="on"?"inactive":"active").addClass(t[n]=="on"?"active":"inactive")})}if(e[n]=="PLAY"){dom.play.parent().toggleClass("disable",t[n]=="off")}if(e[n]=="MARK"){dom.rows.each(function(){$(this).find("td.selected").removeClass("selected");$(this).find("td").eq(vars.bet).addClass("selected")})}if(e[n]=="LINE"){clearInterval(vars.blinking);dom.rows.find("td.white").each(function(){$(this).removeClass("white")})}if(e[n]=="WIN"){dom.pay.toggleClass("hide",t[n]=="off")}if(e[n]=="CARDS"){dom.cards.each(function(){$(this).toggleClass("link",t[n]=="on")})}if(e[n]=="COVER"){dom.cards.each(function(){$(this).html("").removeClass("front red black").addClass("back")})}if(e[n]=="LED"){dom.leds.each(function(){$(this).addClass("invisible")})}}},this.toBet=function(e){if(e.hasClass("active")){var t=e.html().indexOf("MAX")>=0;var n=vars.credits<cons.BETS?vars.credits:cons.BETS;vars.bet=t?n:vars.bet==n?1:vars.bet+1;dom.info.html("BET "+vars.bet);app.reset(["WIN","MARK","LINE","LED"],["off"]);if(t){app.toDeal()}}},this.toDeal=function(){if(!dom.play.parent().hasClass("disable")){var e,t,n,r,i;var s=0,o=0;var u=dom.play.html();app.reset(["BET","PLAY","WIN","CARDS","LINE",u=="DEAL"?"COVER":"",u=="DEAL"?"LED":""],["off","off","off","off","off"]);if(u=="DEAL"){vars.credits-=vars.bet;dom.assets.html(vars.credits+" CREDITS");dom.earnings.html(Number(dom.earnings.html())-vars.amount*vars.bet)}e=dom.screen.find("div.invisible");s=setInterval(function(){if(o==e.length){clearInterval(s);if(u!="DEAL"){vars.serie=""}dom.play.html(u=="DEAL"?"DRAW":"DEAL");app.toAnalyze()}else{do{n=Math.ceil(Math.random()*13);t=Math.floor(Math.random()*cons.SUITES.length);r=cons.SUITES[t];i=cons.COLORS[t]}while(vars.serie.indexOf(n+"_"+r+",")>=0);vars.serie+=n+"_"+r+",";switch(n){case 1:n="A";break;case 11:n="J";break;case 12:n="Q";break;case 13:n="K";break}e.eq(o++).parent().find("div.card").removeClass("back front black red").addClass("front "+i).html("<div class='sign'>"+n+"</div><div class='suite'>&#98"+r+";</div>")}},100)}},this.toHold=function(e){if(dom.cards.eq(e).hasClass("link")){dom.leds.eq(e).toggleClass("invisible",!dom.leds.eq(e).hasClass("invisible"))}},this.toAnalyze=function(){var signs=[],suites=[],groups={};var J=11,Q=12,K=13,A=14;var flush,straight,max,pair,aux;for(var i=0;i<cons.CARDS;i++){signs.push(eval(dom.cards.eq(i).find("div.sign").html()));suites.push(dom.cards.eq(i).find("div.suite").html())}signs.sort(function(e,t){return e-t});if(signs[0]==2&&signs[cons.CARDS-1]==A){aux=signs[cons.CARDS-1];signs[cons.CARDS-1]=cons.CARDS+1}straight=signs.reduce(function(e,t){return e+1==t?t:false})==signs[cons.CARDS-1];flush=suites.reduce(function(e,t){return e==t?e:false});if(aux){signs[cons.CARDS-1]=aux}if(straight||flush){vars.hand=straight&&flush?signs[0]==10?1:2:flush?5:6}else{signs.forEach(function(e){groups[e]=(groups[e]||0)+1});aux=Object.keys(groups).length;max=Math.max.apply(null,Object.keys(groups).map(function(e){return groups[e]}));pair=Math.max.apply(null,Object.keys(groups).map(function(e){return e*groups[e]}));vars.hand=max==4?3:max==3?aux==2?4:7:aux==3?8:aux==4&&pair>20?9:0}app.toSolve()},this.toSolve=function(){var e,t;var n=0;e=dom.rows.eq(vars.hand-1).find("td");if(vars.hand>0){e.eq(0).addClass("white");e.eq(vars.bet).addClass("white");vars.blinking=setInterval(function(){e.eq(0).toggleClass("white",!e.eq(0).hasClass("white"));e.eq(vars.bet).toggleClass("white",!e.eq(vars.bet).hasClass("white"))},500);if(dom.play.html()=="DEAL"){app.reset(["WIN"],["on"]);dom.earnings.html(Number(dom.earnings.html())+vars.amount*e.eq(vars.bet).html());t=vars.credits+Number(e.eq(vars.bet).html());vars.addition=setInterval(function(){if(vars.credits<t){vars.credits++;dom.pay.html("WIN "+ ++n);dom.assets.html(vars.credits+" CREDITS")}else{clearInterval(vars.addition);app.reset(["BET","PLAY"],["on","on"])}},100)}else{app.reset(["CARDS","PLAY"],["on","on"])}}else{app.reset([dom.play.html()=="DEAL"?"BET":"CARDS","PLAY"],["on","on"])}if(dom.play.html()=="DEAL"&&vars.bet>vars.credits){vars.bet=1;dom.info.html("BET "+vars.bet);app.reset(["MARK"],[]);if(vars.credits==0){dom.assets.html("GAME OVER");app.reset(["BET","PLAY"],["off","off"])}}dom.earnings.toggleClass("green",dom.earnings.html()>0)}};var assign=new function(){dom.amount.on("keydown paste",function(e){return tools.numeric(e.charCode||e.keyCode||0,true)});dom.credits.on("keydown paste",function(e){return tools.numeric(e.charCode||e.keyCode||0,false)});dom.start.on("click",function(){app.init()});this.add=function(){dom.play.on("click",function(){app.toDeal()});dom.bets.on("click",function(){app.toBet($(this))});dom.cards.each(function(e){$(this).on("click",function(){app.toHold(e)})})}}})
	</script>
</head>
<body>
	
	<header class="page">JACKS OR BETTER</header>
	
	<article class="page">
		
		<section class="form">
			
			<b>Fill the options to start playing</b>
			
			<blockquote>
				
				<div class="box">
					
					<label for="amount">Amount:&nbsp;</label>
					<input type="text" id="amount" value="100" maxlength="5"> <b>BTC</b>
					
					<br /><br />
					
					<label for="credits">Credits: &nbsp;</label>
					<input type="text" id="credits" value="100" maxlength="5">
					
					<button type="button" id="start" class="columnright link">START PLAYING</button>
					
				</div>
								
			</blockquote>
			
			<b>Example</b>
			
			<blockquote>100 btc as 100 credits = 1 btc each bet</blockquote>
			
		</section>
		
		<section class="screen hide"></section>
		
	</article>
	
	<footer class="page"></footer>
	
</body>
</html>